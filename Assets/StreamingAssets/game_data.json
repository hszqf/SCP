{
  "meta": {
    "schemaVersion": "0.1",
    "dataVersion": "2026.01.24a",
    "comment": "Minimal sample for data pipeline"
  },
  "balance": {
    "LocalPanicHighThreshold": {
      "value": "6",
      "type": "int",
      "comment": "Local panic trigger"
    },
    "RandomEventBaseProb": {
      "value": "0.35",
      "type": "float",
      "comment": "Random event probability"
    },
    "DefaultAutoResolveAfterDays": {
      "value": "0",
      "type": "int",
      "comment": "Unused in v0"
    },
    "DefaultIgnoreApplyMode": {
      "value": "ApplyDailyKeep",
      "type": "enum",
      "comment": "Default ignore mode"
    }
  },
  "nodes": [
    {
      "nodeId": "N1",
      "name": "节点1",
      "tags": [
        "urban",
        "lab"
      ],
      "startLocalPanic": 2,
      "startPopulation": 12,
      "startAnomalyIds": [
        "AN_001"
      ]
    },
    {
      "nodeId": "N2",
      "name": "节点2",
      "tags": [
        "rural"
      ],
      "startLocalPanic": 1,
      "startPopulation": 9,
      "startAnomalyIds": []
    },
    {
      "nodeId": "N3",
      "name": "节点3",
      "tags": [
        "urban"
      ],
      "startLocalPanic": 0,
      "startPopulation": 10,
      "startAnomalyIds": [
        "AN_002"
      ]
    }
  ],
  "anomalies": [
    {
      "anomalyId": "AN_001",
      "name": "镜面渗漏",
      "class": "Euclid",
      "tags": [
        "bio",
        "stealth"
      ],
      "baseThreat": 2,
      "investigateDifficulty": 3,
      "containDifficulty": 4,
      "manageRisk": 2
    },
    {
      "anomalyId": "AN_002",
      "name": "失声合唱",
      "class": "Keter",
      "tags": [
        "memetic",
        "panic"
      ],
      "baseThreat": 3,
      "investigateDifficulty": 5,
      "containDifficulty": 6,
      "manageRisk": 4
    }
  ],
  "taskDefs": [
    {
      "taskDefId": "TASK_INVESTIGATE",
      "taskType": "Investigate",
      "name": "调查",
      "baseDays": 5,
      "progressPerDay": 0.12,
      "agentSlotsMin": 1,
      "agentSlotsMax": 3,
      "yieldKey": "Intel",
      "yieldPerDay": 1
    },
    {
      "taskDefId": "TASK_CONTAIN",
      "taskType": "Contain",
      "name": "收容",
      "baseDays": 6,
      "progressPerDay": 0.1,
      "agentSlotsMin": 1,
      "agentSlotsMax": 3,
      "yieldKey": "Money",
      "yieldPerDay": 0
    },
    {
      "taskDefId": "TASK_MANAGE",
      "taskType": "Manage",
      "name": "管理",
      "baseDays": 999,
      "progressPerDay": 0.02,
      "agentSlotsMin": 1,
      "agentSlotsMax": 2,
      "yieldKey": "NegEntropy",
      "yieldPerDay": 2
    }
  ],
  "events": [
    {
      "eventDefId": "EVT_INVESTIGATE_SPOTTED",
      "source": "Investigate",
      "causeType": "TaskInvestigate",
      "weight": 10,
      "title": "调查暴露",
      "desc": "调查行动被目击，必须立即回应。",
      "blockPolicy": "BlockOriginTask",
      "defaultAffects": [
        "OriginTask",
        "Node"
      ],
      "autoResolveAfterDays": 0,
      "ignoreApplyMode": "ApplyDailyKeep",
      "ignoreEffectId": "EFF_IGNORE_INV"
    },
    {
      "eventDefId": "EVT_RANDOM_SHORTAGE",
      "source": "Random",
      "causeType": "Random",
      "weight": 6,
      "title": "补给短缺",
      "desc": "供应链出现波动，需要做出取舍。",
      "blockPolicy": "None",
      "defaultAffects": [
        "Node"
      ],
      "autoResolveAfterDays": 0,
      "ignoreApplyMode": "ApplyOnceThenRemove",
      "ignoreEffectId": "EFF_IGNORE_RANDOM"
    }
  ],
  "eventOptions": [
    {
      "eventDefId": "EVT_INVESTIGATE_SPOTTED",
      "optionId": "O1",
      "text": "安抚目击者",
      "resultText": "舆情暂时稳定。",
      "affects": [
        "Node"
      ],
      "effectId": "EFF_OPTION_CALM"
    },
    {
      "eventDefId": "EVT_INVESTIGATE_SPOTTED",
      "optionId": "O2",
      "text": "加速推进任务",
      "resultText": "调查小队冒险推进，压力上升。",
      "affects": [
        "OriginTask",
        "Global"
      ],
      "effectId": "EFF_OPTION_PUSH"
    },
    {
      "eventDefId": "EVT_RANDOM_SHORTAGE",
      "optionId": "O1",
      "text": "优先保障民生",
      "resultText": "民众情绪稳定，但经费吃紧。",
      "affects": [
        "Node",
        "Global"
      ],
      "effectId": "EFF_OPTION_RELIEF"
    },
    {
      "eventDefId": "EVT_RANDOM_SHORTAGE",
      "optionId": "O2",
      "text": "保障项目推进",
      "resultText": "项目得到资源，人口受到影响。",
      "affects": [
        "Node",
        "TaskType:Contain"
      ],
      "effectId": "EFF_OPTION_PROJECT"
    }
  ],
  "effects": [
    {
      "effectId": "EFF_IGNORE_INV",
      "comment": "调查事件忽略惩罚"
    },
    {
      "effectId": "EFF_OPTION_CALM",
      "comment": "安抚目击者"
    },
    {
      "effectId": "EFF_OPTION_PUSH",
      "comment": "加速推进任务"
    },
    {
      "effectId": "EFF_IGNORE_RANDOM",
      "comment": "随机事件忽略惩罚"
    },
    {
      "effectId": "EFF_OPTION_RELIEF",
      "comment": "保障民生"
    },
    {
      "effectId": "EFF_OPTION_PROJECT",
      "comment": "保障项目推进"
    }
  ],
  "effectOps": [
    {
      "effectId": "EFF_IGNORE_INV",
      "scope": "OriginTask",
      "statKey": "TaskProgressDelta",
      "op": "Add",
      "value": -0.2,
      "min": null,
      "max": null,
      "comment": "忽略将倒退任务进度"
    },
    {
      "effectId": "EFF_IGNORE_INV",
      "scope": "Node",
      "statKey": "LocalPanic",
      "op": "Add",
      "value": 1,
      "min": null,
      "max": null,
      "comment": "忽略提升本地恐慌"
    },
    {
      "effectId": "EFF_OPTION_CALM",
      "scope": "Node",
      "statKey": "LocalPanic",
      "op": "Add",
      "value": -2,
      "min": null,
      "max": null,
      "comment": "降低本地恐慌"
    },
    {
      "effectId": "EFF_OPTION_PUSH",
      "scope": "OriginTask",
      "statKey": "TaskProgressDelta",
      "op": "Add",
      "value": 0.15,
      "min": null,
      "max": null,
      "comment": "来源任务获得推进"
    },
    {
      "effectId": "EFF_OPTION_PUSH",
      "scope": "Global",
      "statKey": "WorldPanic",
      "op": "Add",
      "value": 1,
      "min": null,
      "max": null,
      "comment": "全局恐慌上升"
    },
    {
      "effectId": "EFF_IGNORE_RANDOM",
      "scope": "Node",
      "statKey": "LocalPanic",
      "op": "Add",
      "value": 1,
      "min": null,
      "max": null,
      "comment": "忽略会增加恐慌"
    },
    {
      "effectId": "EFF_OPTION_RELIEF",
      "scope": "Node",
      "statKey": "LocalPanic",
      "op": "Add",
      "value": -1,
      "min": null,
      "max": null,
      "comment": "稳定情绪"
    },
    {
      "effectId": "EFF_OPTION_RELIEF",
      "scope": "Global",
      "statKey": "Money",
      "op": "Add",
      "value": -80,
      "min": null,
      "max": null,
      "comment": "经费消耗"
    },
    {
      "effectId": "EFF_OPTION_PROJECT",
      "scope": "Node",
      "statKey": "Population",
      "op": "Add",
      "value": -1,
      "min": null,
      "max": null,
      "comment": "人口损失"
    },
    {
      "effectId": "EFF_OPTION_PROJECT",
      "scope": "TaskType:Contain",
      "statKey": "TaskProgressDelta",
      "op": "Add",
      "value": 0.1,
      "min": null,
      "max": null,
      "comment": "收容任务推进"
    }
  ],
  "eventTriggers": [
    {
      "eventDefId": "EVT_INVESTIGATE_SPOTTED",
      "minDay": 1,
      "maxDay": null,
      "requiresNodeTagsAny": [],
      "requiresNodeTagsAll": [],
      "requiresAnomalyTagsAny": [
        "stealth"
      ],
      "requiresSecured": false,
      "minLocalPanic": 0,
      "taskType": "Investigate",
      "onlyAffectOriginTask": true
    },
    {
      "eventDefId": "EVT_RANDOM_SHORTAGE",
      "minDay": 1,
      "maxDay": null,
      "requiresNodeTagsAny": [
        "urban"
      ],
      "requiresNodeTagsAll": [],
      "requiresAnomalyTagsAny": [],
      "requiresSecured": null,
      "minLocalPanic": null,
      "taskType": "",
      "onlyAffectOriginTask": false
    }
  ]
}
